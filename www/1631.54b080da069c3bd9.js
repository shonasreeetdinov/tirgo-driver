"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1631,324],{2822:(G,w,r)=>{r.r(w),r.d(w,{ActiveorderPageModule:()=>I});var p=r(6814),i=r(6223),c=r(7331),A=r(6800),P=r(5861),M=r(7838),L=r(5053);const h=(0,r(9234).fo)("CallNumber",{web:()=>r.e(9668).then(r.bind(r,9668)).then(n=>n.CallNumber)});var t=r(2029),Z=r(2545),s=r(8720),m=r(2486),E=r(3911);function j(n,F){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const f=F.$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.returnNameTypeTransport(f)," ")}}function Q(n,F){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,j,2,1,"span",10),t.qZA()),2&n){const f=t.oxw();t.xp6(1),t.Q6J("ngForOf",f.item.transport_types)}}function V(n,F){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const f=t.oxw();t.xp6(1),t.hij(" ",f.returnNameTypeTransport(f.item.transport_type)," ")}}function et(n,F){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u0430\u044f \u043e\u043f\u043b\u0430\u0442\u0430")),t.xp6(3),t.Oqu("\u0414\u0430"))}function l(n,F){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"ADR")),t.xp6(3),t.Oqu("\u0414\u0430"))}function e(n,F){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430")),t.xp6(3),t.Oqu("\u0414\u0430"))}function a(n,F){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&n){const f=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")),t.xp6(3),t.Oqu(f.item.userphoneorder)}}const C=[{path:"",component:(()=>{class n{constructor(f,o,u,Y,N,x){this.authService=f,this.loadingCtrl=o,this.alertController=u,this.platform=Y,this.router=N,this.modalCtrl=x}ngOnInit(){this.item=this.authService.activeorder}finishOrder(f){var o=this;return(0,P.Z)(function*(){const u=yield o.alertController.create({header:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?",cssClass:"customAlert",buttons:[{text:"\u041d\u0435\u0442",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"\u0414\u0430",handler:(Y=(0,P.Z)(function*(){yield u.present(),o.loading=yield o.loadingCtrl.create({message:"\u0417\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u043c \u0437\u0430\u043a\u0430\u0437"}),o.loading.present(),M.b.getCurrentPosition({maximumAge:1e3,timeout:5e3,enableHighAccuracy:!0}).then(function(){var N=(0,P.Z)(function*(x){let J;J=f.isMerchant?yield o.authService.finishMerchantOrder(o.authService.activeorder.id,x.coords.latitude.toString(),x.coords.longitude.toString(),f.route?.to_city).toPromise():yield o.authService.finishOrder(o.authService.activeorder.id,x.coords.latitude.toString(),x.coords.longitude.toString()).toPromise(),yield(yield o.modalCtrl.create({component:L.b,showBackdrop:!0,breakpoints:[0,.6],initialBreakpoint:.6,presentingElement:yield o.modalCtrl.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios",componentProps:{orderid:o.authService.activeorder.id,userid:o.authService.activeorder.user_id}})).present(),J.status?(o.loading.dismiss(),J.error&&(yield o.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430",J.error)),o.authService.activeorder=null,yield o.router.navigate(["/tabs/home"],{replaceUrl:!0})):(o.loading.dismiss(),yield o.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430",J.error))});return function(x){return N.apply(this,arguments)}}()).catch(function(){var N=(0,P.Z)(function*(x){o.loading.dismiss(),o.authService.alertLocation("\u0423\u043f\u0441","\u0414\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Tirgo Driver")});return function(x){return N.apply(this,arguments)}}())}),function(){return Y.apply(this,arguments)})}]});var Y;yield u.present()})()}callMan(f){return(0,P.Z)(function*(){try{const o=yield h.call({number:f,bypassAppChooser:!0});console.log("Call successful",o)}catch(o){console.error("Error calling number",o)}})()}returnNameTypeTransport(f){const o=this.authService.typetruck.findIndex(u=>+u.id==+f);return o>=0?this.authService.typetruck[o].name:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}returnNameCargoType(f){const o=this.authService.typecargo.findIndex(u=>+u.id==+f);return o>=0?this.authService.typecargo[o].name:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(Z.$),t.Y36(c.HT),t.Y36(c.Br),t.Y36(s.t4),t.Y36(A.F0),t.Y36(c.IN))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-activeorder"]],decls:66,vars:43,consts:[[1,"ion-padding"],[1,"order-item"],[1,"order-item-articul"],["src","assets/img/circle.svg","alt",""],[1,"table-info","table-img"],[1,"table-data"],[2,"color","#fff"],[4,"ngIf"],[1,"get-order-btn","order-succes-btn",3,"click"],[1,"get-order-btn",3,"click"],[4,"ngFor","ngForOf"]],template:function(o,u){1&o&&(t._UZ(0,"app-header"),t.TgZ(1,"ion-content",0)(2,"div",1)(3,"div",2)(4,"span"),t._UZ(5,"img",3),t._uU(6),t.qZA()(),t.TgZ(7,"table",4)(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()(),t.TgZ(15,"tr")(16,"td"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()()()(),t.TgZ(21,"table",5)(22,"tbody")(23,"tr")(24,"td"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.TgZ(30,"tr")(31,"td"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td")(35,"div",6),t.YNc(36,Q,2,1,"span",7),t.YNc(37,V,2,1,"span",7),t.qZA()()(),t.TgZ(38,"tr")(39,"td"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA()(),t.YNc(44,et,6,4,"tr",7),t.YNc(45,l,6,4,"tr",7),t.YNc(46,e,6,4,"tr",7),t.TgZ(47,"tr")(48,"td"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td"),t._uU(52),t.qZA()(),t.TgZ(53,"tr")(54,"td"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td"),t._uU(58),t.qZA()(),t.YNc(59,a,6,4,"tr",7),t.qZA()(),t.TgZ(60,"button",8),t.NdJ("click",function(){return u.callMan(u.item.userphoneorder)}),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"button",9),t.NdJ("click",function(){return u.finishOrder(u.item)}),t._uU(64),t.ALo(65,"translate"),t.qZA()()()),2&o&&(t.xp6(6),t.hij(" \u2116",u.authService.addLeadingZeros(null==u.item?null:u.item.id),""),t.xp6(5),t.hij("",t.lcZ(12,22,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0438\u0437"),":"),t.xp6(3),t.Oqu(null==u.item.route?null:u.item.route.from_city),t.xp6(3),t.hij("",t.lcZ(18,24,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0432"),":"),t.xp6(3),t.Oqu(null==u.item.route?null:u.item.route.to_city),t.xp6(5),t.Oqu(t.lcZ(26,26,"\u0412\u0440\u0435\u043c\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438")),t.xp6(3),t.Oqu(t.xi3(29,28,null==u.item?null:u.item.date_send,"dd MMMM yyyy HH:mm")),t.xp6(4),t.Oqu(t.lcZ(33,31,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430")),t.xp6(4),t.Q6J("ngIf",u.item.transport_types),t.xp6(1),t.Q6J("ngIf",u.item.transport_type&&!u.item.transport_types),t.xp6(3),t.Oqu(t.lcZ(41,33,"\u0422\u0438\u043f \u0433\u0440\u0443\u0437\u0430")),t.xp6(3),t.Oqu(u.returnNameCargoType(u.item.type_cargo)),t.xp6(1),t.Q6J("ngIf",u.item.no_cash),t.xp6(1),t.Q6J("ngIf",u.item.adr),t.xp6(1),t.Q6J("ngIf",u.item.secure_transaction),t.xp6(3),t.Oqu(t.lcZ(50,35,"\u0412\u0435\u0441 \u0433\u0440\u0443\u0437\u0430")),t.xp6(3),t.hij("",u.item.weight," \u043a\u0433."),t.xp6(3),t.Oqu(t.lcZ(56,37,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")),t.xp6(3),t.Oqu(u.item.usernameorder),t.xp6(1),t.Q6J("ngIf",u.item.userphoneorder),t.xp6(2),t.Oqu(t.lcZ(62,39,"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c")),t.xp6(3),t.Oqu(t.lcZ(65,41,"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437")))},dependencies:[p.sg,p.O5,c.W2,m.E,p.uU,E.X$],styles:[".table-info[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px;padding:0 0 0 15px!important}"]})}return n})()}];let T=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[A.Bz.forChild(C),A.Bz]})}return n})();var U=r(324),g=r(2319);let I=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.ez,i.u5,c.Pc,T,U.HeaderPageModule,g.h,E.aw]})}return n})()},324:(G,w,r)=>{r.r(w),r.d(w,{HeaderPageModule:()=>h});var p=r(6814),i=r(6223),c=r(7331),A=r(6800),P=r(2486),M=r(2029);const L=[{path:"",component:P.E}];let O=(()=>{class t{static#t=this.\u0275fac=function(m){return new(m||t)};static#e=this.\u0275mod=M.oAB({type:t});static#n=this.\u0275inj=M.cJS({imports:[A.Bz.forChild(L),A.Bz]})}return t})(),h=(()=>{class t{static#t=this.\u0275fac=function(m){return new(m||t)};static#e=this.\u0275mod=M.oAB({type:t});static#n=this.\u0275inj=M.cJS({imports:[p.ez,i.u5,c.Pc,O]})}return t})()},2486:(G,w,r)=>{r.d(w,{E:()=>h});var p=r(5861),i=r(5053),c=r(2029),A=r(6800),P=r(3248),M=r(2545);let L=(()=>{class t{constructor(s,m){this.router=s,this.authService=m}init(){try{P.V.requestPermissions().then(s=>{"granted"===s.receive?(console.log("We have permission to send push notifications"),P.V.register()):console.log("We do not have permission to send push notifications")}),P.V.addListener("registration",s=>{console.log("saveDeviceToken",s.value),this.authService.saveDeviceToken(s.value).subscribe()}),P.V.addListener("registrationError",s=>{console.error("Error with Push plugin",s)}),P.V.addListener("pushNotificationReceived",s=>{console.log("Push received: ",s)}),P.V.addListener("pushNotificationActionPerformed",s=>{console.log("Push action performed: ",s)})}catch(s){console.log(s)}}static#t=this.\u0275fac=function(m){return new(m||t)(c.LFG(A.F0),c.LFG(M.$))};static#e=this.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var O=r(7331);let h=(()=>{class t{constructor(s,m,E,j,Q){this.router=s,this.pushService=m,this.menu=E,this.authService=j,this.modalCtrl=Q}ngOnInit(){}menuOpened(){var s=this;return(0,p.Z)(function*(){yield s.menu.toggle()})()}goToNotify(){var s=this;return(0,p.Z)(function*(){s.pushService.init(),yield s.router.navigate(["/notify"])})()}openTestPage(){var s=this;return(0,p.Z)(function*(){const m=yield s.modalCtrl.create({component:i.b,showBackdrop:!0,breakpoints:[0,.6],initialBreakpoint:.6,presentingElement:yield s.modalCtrl.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield m.present(),yield m.onWillDismiss()})()}returnLogo(){return"ru"===this.authService.language?"/assets/logos/rus-oq.png":"tr"===this.authService.language?"/assets/logos/turk-oq.png.png":"en"===this.authService.language?"/assets/logos/english-oq.png":void 0}static#t=this.\u0275fac=function(m){return new(m||t)(c.Y36(A.F0),c.Y36(L),c.Y36(O._q),c.Y36(M.$),c.Y36(O.IN))};static#e=this.\u0275cmp=c.Xpm({type:t,selectors:[["app-header"]],decls:7,vars:0,consts:[[1,"header","ion-padding"],[1,"header__left",3,"click"],["src","assets/img/menu.svg","alt",""],["src","/assets/logos/tirgo-logo.png","alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",1,"header__logo"],[1,"header__right",3,"click"],["src","assets/img/notification.svg","alt",""]],template:function(m,E){1&m&&(c.TgZ(0,"ion-header")(1,"header",0)(2,"button",1),c.NdJ("click",function(){return E.menuOpened()}),c._UZ(3,"img",2),c.qZA(),c._UZ(4,"img",3),c.TgZ(5,"button",4),c.NdJ("click",function(){return E.goToNotify()}),c._UZ(6,"img",5),c.qZA()()())},dependencies:[O.Gu],styles:[".header[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:1fr auto 1fr;color:#fff;padding-top:calc(.9375rem + env(safe-area-inset-top))!important}.header__left[_ngcontent-%COMP%]{padding:.3125rem;justify-self:start}.header__logo[_ngcontent-%COMP%]{width:11.25rem}.header__title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;justify-self:center}.header__right[_ngcontent-%COMP%]{padding:.3125rem;justify-self:right}.header__right[_ngcontent-%COMP%]   i.icm-notif[_ngcontent-%COMP%]{font-size:1.375rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none!important}"]})}return t})()},5053:(G,w,r)=>{r.d(w,{b:()=>M});var p=r(5861),i=r(2029),c=r(2545),A=r(7331),P=r(6223);let M=(()=>{class L{constructor(h,t){this.authService=h,this.modalCtrl=t,this.star=5,this.comment=""}ngOnInit(){}setRaiting(){var h=this;return(0,p.Z)(function*(){(yield h.authService.setRaiting(h.orderid,h.star,h.comment,h.userid).toPromise()).status&&(yield h.authService.alert("\u041e\u0442\u043b\u0438\u0447\u043d\u043e","\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u043e\u0446\u0435\u043d\u0438\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430."),yield h.modalCtrl.dismiss())})()}static#t=this.\u0275fac=function(t){return new(t||L)(i.Y36(c.$),i.Y36(A.IN))};static#e=this.\u0275cmp=i.Xpm({type:L,selectors:[["app-setraiting"]],inputs:{orderid:"orderid",userid:"userid"},decls:13,vars:6,consts:[[1,"raiting-page"],[1,"stars"],[3,"name","click"],["type","text","placeholder","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,Z){1&t&&(i.TgZ(0,"ion-content")(1,"div",0)(2,"h2"),i._uU(3,"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),i.qZA(),i.TgZ(4,"div",1)(5,"ion-icon",2),i.NdJ("click",function(){return Z.star=1}),i.qZA(),i.TgZ(6,"ion-icon",2),i.NdJ("click",function(){return Z.star=2}),i.qZA(),i.TgZ(7,"ion-icon",2),i.NdJ("click",function(){return Z.star=3}),i.qZA(),i.TgZ(8,"ion-icon",2),i.NdJ("click",function(){return Z.star=4}),i.qZA(),i.TgZ(9,"ion-icon",2),i.NdJ("click",function(){return Z.star=5}),i.qZA()(),i.TgZ(10,"input",3),i.NdJ("ngModelChange",function(m){return Z.comment=m}),i.qZA(),i.TgZ(11,"button",4),i.NdJ("click",function(){return Z.setRaiting()}),i._uU(12,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443"),i.qZA()()()),2&t&&(i.xp6(5),i.Q6J("name",Z.star>=1?"star":"star-outline"),i.xp6(1),i.Q6J("name",Z.star>=2?"star":"star-outline"),i.xp6(1),i.Q6J("name",Z.star>=3?"star":"star-outline"),i.xp6(1),i.Q6J("name",Z.star>=4?"star":"star-outline"),i.xp6(1),i.Q6J("name",Z.star>=5?"star":"star-outline"),i.xp6(1),i.Q6J("ngModel",Z.comment))},dependencies:[P.Fj,P.JJ,P.On,A.W2,A.gu],styles:[".raiting-page[_ngcontent-%COMP%]{height:400px;display:flex;align-items:center;justify-content:flex-start;flex-direction:column}.raiting-page[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:20px;width:80%;outline:none;background:#252333;border:none;border-radius:4px;height:56px;padding:0 0 0 15px;font-family:Montserrat,sans-serif;font-style:normal;font-weight:500;font-size:14px;line-height:16px;color:#cfd2d8;box-sizing:border-box}.raiting-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:0;color:#fff}.raiting-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;text-align:center;color:#fff}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{margin-top:20px}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:5px;color:#ed901e;font-size:3em}.raiting-page[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:80%;margin-top:20px;border-radius:10px;background:#403c5f}"]})}return L})()},9234:(G,w,r)=>{r.d(w,{Uw:()=>V,fo:()=>E});var p=r(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var O=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(O||{});class h extends Error{constructor(e,a){super(e),this.message=e,this.code=a}}const Z=l=>{var e,a,d,C,T;const U=l.CapacitorCustomPlatform||null,g=l.Capacitor||{},I=g.Plugins=g.Plugins||{},n=l.CapacitorPlatforms,f=(null===(e=n?.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==U?U.name:(l=>{var e,a;return l?.androidBridge?"android":null!==(a=null===(e=l?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(l)),u=(null===(a=n?.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==f()),N=(null===(d=n?.currentPlatform)||void 0===d?void 0:d.isPluginAvailable)||(v=>{const _=K.get(v);return!(!_?.platforms.has(f())&&!J(v))}),J=(null===(C=n?.currentPlatform)||void 0===C?void 0:C.getPluginHeader)||(v=>{var _;return null===(_=g.PluginHeaders)||void 0===_?void 0:_.find(R=>R.name===v)}),K=new Map,at=(null===(T=n?.currentPlatform)||void 0===T?void 0:T.registerPlugin)||((v,_={})=>{const R=K.get(v);if(R)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),R.proxy;const H=f(),k=J(v);let B;const ut=function(){var y=(0,p.Z)(function*(){return!B&&H in _?B=B="function"==typeof _[H]?yield _[H]():_[H]:null!==U&&!B&&"web"in _&&(B=B="function"==typeof _.web?yield _.web():_.web),B});return function(){return y.apply(this,arguments)}}(),X=y=>{let b;const D=(...W)=>{const q=ut().then(S=>{const $=((y,b)=>{var D,W;if(!k){if(y)return null===(W=y[b])||void 0===W?void 0:W.bind(y);throw new h(`"${v}" plugin is not implemented on ${H}`,O.Unimplemented)}{const q=k?.methods.find(S=>b===S.name);if(q)return"promise"===q.rtype?S=>g.nativePromise(v,b.toString(),S):(S,$)=>g.nativeCallback(v,b.toString(),S,$);if(y)return null===(D=y[b])||void 0===D?void 0:D.bind(y)}})(S,y);if($){const z=$(...W);return b=z?.remove,z}throw new h(`"${v}.${y}()" is not implemented on ${H}`,O.Unimplemented)});return"addListener"===y&&(q.remove=(0,p.Z)(function*(){return b()})),q};return D.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:y,writable:!1,configurable:!1}),D},rt=X("addListener"),it=X("removeListener"),ct=(y,b)=>{const D=rt({eventName:y},b),W=function(){var S=(0,p.Z)(function*(){const $=yield D;it({eventName:y,callbackId:$},b)});return function(){return S.apply(this,arguments)}}(),q=new Promise(S=>D.then(()=>S({remove:W})));return q.remove=(0,p.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield W()}),q},tt=new Proxy({},{get(y,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?ct:rt;case"removeListener":return it;default:return X(b)}}});return I[v]=tt,K.set(v,{name:v,proxy:tt,platforms:new Set([...Object.keys(_),...k?[H]:[]])}),tt});return g.convertFileSrc||(g.convertFileSrc=v=>v),g.getPlatform=f,g.handleError=v=>l.console.error(v),g.isNativePlatform=u,g.isPluginAvailable=N,g.pluginMethodNoop=(v,_,R)=>Promise.reject(`${R} does not have an implementation of "${_}".`),g.registerPlugin=at,g.Exception=h,g.DEBUG=!!g.DEBUG,g.isLoggingEnabled=!!g.isLoggingEnabled,g.platform=g.getPlatform(),g.isNative=g.isNativePlatform(),g},m=(l=>l.Capacitor=Z(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),E=m.registerPlugin;class V{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,a){var d=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(a);const T=this.windowListeners[e];T&&!T.registered&&this.addWindowListener(T);const U=function(){var I=(0,p.Z)(function*(){return d.removeListener(e,a)});return function(){return I.apply(this,arguments)}}(),g=Promise.resolve({remove:U});return Object.defineProperty(g,"remove",{value:(I=(0,p.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield U()}),function(){return I.apply(this,arguments)})}),g;var I}removeAllListeners(){var e=this;return(0,p.Z)(function*(){e.listeners={};for(const a in e.windowListeners)e.removeWindowListener(e.windowListeners[a]);e.windowListeners={}})()}notifyListeners(e,a){const d=this.listeners[e];d&&d.forEach(C=>C(a))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,a){this.windowListeners[a]={registered:!1,windowEventName:e,pluginEventName:a,handler:d=>{this.notifyListeners(a,d)}}}unimplemented(e="not implemented"){return new m.Exception(e,O.Unimplemented)}unavailable(e="not available"){return new m.Exception(e,O.Unavailable)}removeListener(e,a){var d=this;return(0,p.Z)(function*(){const C=d.listeners[e];if(!C)return;const T=C.indexOf(a);d.listeners[e].splice(T,1),d.listeners[e].length||d.removeWindowListener(d.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}}}]);
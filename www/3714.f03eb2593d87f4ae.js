"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3714,324],{3714:(T,v,i)=>{i.r(v),i.d(v,{BalancePageModule:()=>S});var _=i(6814),n=i(6223),o=i(1232),h=i(6800),p=i(5861),m=i(5897),e=i(2029),P=i(8720),d=i(2545),s=i(4409),g=i(3911);function r(c,Z){if(1&c&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&c){const t=Z.$implicit;e.Q6J("value",t.Code),e.xp6(1),e.Oqu(t.Ccy)}}function l(c,Z){if(1&c){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){const f=e.CHM(t).$implicit,y=e.oxw(2);return e.KtG(y.selectPrice(f))}),e.TgZ(1,"div",35)(2,"p",36),e._uU(3),e.qZA(),e.TgZ(4,"p",37),e._uU(5),e.qZA()()()}if(2&c){const t=Z.$implicit;e.ekj("active",t.selected),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij("",t.value," Tir")}}const C=function(c){return{selected:c}};function M(c,Z){if(1&c){const t=e.EpF();e.TgZ(0,"div",22)(1,"p",4)(2,"b"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",23)(6,"div",24)(7,"button",25),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.selectmethodpay="click")}),e._UZ(8,"img",26),e.qZA(),e.TgZ(9,"button",25),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.selectmethodpay="payme")}),e._UZ(10,"img",27),e.qZA()()(),e.TgZ(11,"div",28)(12,"p",29),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",30),e.YNc(16,l,6,4,"div",31),e.qZA(),e.TgZ(17,"div",32)(18,"button",33),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.pay())}),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()}if(2&c){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,6,"\u041c\u0435\u0442\u043e\u0434\u044b \u043e\u043f\u043b\u0430\u0442\u044b")),e.xp6(4),e.Q6J("ngClass",e.VKq(12,C,"click"===t.selectmethodpay)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,C,"payme"===t.selectmethodpay)),e.xp6(4),e.Oqu(e.lcZ(14,8,"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438")),e.xp6(3),e.Q6J("ngForOf",t.priceCards),e.xp6(3),e.Oqu(e.lcZ(20,10,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c"))}}function b(c,Z){1&c&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",38),e._uU(3,"\u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u0430 \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443"),e.qZA()(),e.TgZ(4,"ion-button",39),e._uU(5,"OK"),e.qZA()())}const x=[{path:"",component:(()=>{class c{constructor(t,a,u,f){this.navCtrl=t,this.authService=a,this.socketService=u,this.route=f,this.selectmethodpay="click",this.payConfirm=!1,this.data={tir:1,currencyCode:"860",amount:1e3},this.exchanges=[{Ccy:"UZS",Code:"860"},{Ccy:"USD",Code:"840"},{Ccy:"KZT",Code:"398"},{Ccy:"RUB",Code:"643"},{Ccy:"EUR",Code:"978"}]}ngOnInit(){this.updateDriverBalance(),this.getPrice(),this.route.queryParamMap.subscribe(t=>{t&&(this.subscriptionId=t.get("subscription_id"))}),this.valueChanged("tir")}valueChanged(t){"tir"==t&&(this.data.amount=null,this.authService.convertCurrency(this.data).subscribe(a=>{this.data.amount=+this.translateString(a.data.amount)})),"amount"==t&&(this.data.tir=null,this.authService.convertCurrency(this.data).subscribe(a=>{this.data.tir=+this.translateString(a.data.amount)}))}translateString(t){const[a,u]=t.split(".");return a+"."+u.slice(0,2)}getPrice(){this.authService.getSubscribtionsPrice().subscribe(t=>{t.status&&(this.priceCards=t.data,this.subscriptionId&&(this.priceCards=this.priceCards.filter(a=>a.id==+this.subscriptionId)),this.priceCards.length>0&&(this.selectPrice(this.priceCards[0]),this.selectedPrice=this.priceCards[0],this.priceCards[0].selected=!0))})}selectPrice(t){this.priceCards.forEach(a=>a.selected=!1),t.selected=!0,this.selectedPrice=t,this.selectedPrice.price=7==this.selectedPrice.value?"80000":"180000"}getPriceText(t){}back(){this.navCtrl.back()}pay(){var t=this;return(0,p.Z)(function*(){if(t.amount=1e3*t.selectedPrice.value,"click"===t.selectmethodpay)m.A.open({url:"https://my.click.uz/services/pay?service_id=24721&merchant_id=17235&amount="+t.amount+"&transaction_param="+t.authService.currentUser.id,windowName:"_system"});else if("payme"===t.selectmethodpay){let a=btoa("m=636ca5172cfb25761a99e6af;ac.UserID="+t.authService.currentUser.id+";a="+t.amount+"00");m.A.open({url:"https://checkout.paycom.uz/"+a,windowName:"_system"})}})()}withdrawFromActivebalance(){var t=this;return(0,p.Z)(function*(){t.authService.currentUser.balance>0?t.authService.withdrawBalance(t.authService.currentUser.id).subscribe(a=>{a.status?t.payConfirm=!0:a.status||"No enough balance"!=a.error?!a.status&&"No enough balance"==a.error&&t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430",a.error.toString()):t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0431\u0430\u043b\u0430\u043d\u0441\u0430")}):yield t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0431\u0430\u043b\u0430\u043d\u0441\u0430")})()}updateDriverBalance(){this.socketService.updateDriverBalance().subscribe(t=>{if(t){const a=JSON.parse(t);this.authService.currentUser.balance=a.balance,this.authService.currentUser.balance_off=a.balance_off,this.authService.currentUser.balance_in_proccess=a.balance_in_proccess}})}static#e=this.\u0275fac=function(a){return new(a||c)(e.Y36(P.SH),e.Y36(d.$),e.Y36(s.$),e.Y36(h.gz))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-balance"]],decls:31,vars:9,consts:[[1,"wrapper-fluid-header"],[1,"logo-wrap","personal-head"],[1,"top-back",3,"click"],["src","assets/img/arrow-left.svg","alt",""],[1,"ion-no-padding","ion-no-margin"],[1,"body-wrap","form-block"],[1,"autorize"],[2,"display","flex","align-items","center","gap","5px"],[1,"input-with-suffix",2,"position","relative"],["type","tel","inputmode","decimal","name","tir",3,"ngModel","ngModelChange"],["tirInput",""],[1,"suffix"],[2,"color","white"],[2,"position","relative"],["type","tel","inputmode","number","name","amount",3,"ngModel","ngModelChange"],["amountInput",""],["name","currency",2,"background","#252333","color","#fff","height","55px","border","none","border-radius","4px","outline","none",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"wrapper-fluid",2,"margin-top","20px"],["class","body-wrap",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"body-wrap"],[1,"payment-method"],[1,"payment-method-wrap"],[3,"ngClass","click"],["src","assets/payment/click.svg","alt",""],["src","assets/payment/payme.svg","alt",""],[2,"width","100%"],[2,"text-align","center","width","100%"],[1,"body-wrap","form-block",2,"width","100%"],["class","price-card",3,"active","click",4,"ngFor","ngForOf"],[1,"payment-total","form-block"],[1,"reg-btn","podpis-buy",2,"background-color","rgba(255, 113, 0, 1)",3,"click"],[1,"price-card",3,"click"],[2,"display","flex","justify-content","space-between","width","100%"],[1,"month-text"],[1,"price-text"],[2,"text-align","center"],["routerLink","/tabs",2,"display","flex"]],template:function(a,u){1&a&&(e.TgZ(0,"ion-header")(1,"div",0)(2,"div",1)(3,"button",2),e.NdJ("click",function(){return u.back()}),e._UZ(4,"img",3),e.qZA(),e.TgZ(5,"h2"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div"),e.qZA()()(),e.TgZ(9,"ion-content",4)(10,"div",5)(11,"div",6)(12,"p")(13,"b"),e._uU(14,"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 \u043a\u0443\u0440\u0441"),e.qZA()(),e.TgZ(15,"div",7)(16,"div",8)(17,"input",9,10),e.NdJ("ngModelChange",function(y){return u.data.tir=y})("ngModelChange",function(){return u.valueChanged("tir")}),e.qZA(),e.TgZ(19,"span",11),e._uU(20,"TIR"),e.qZA()(),e.TgZ(21,"span",12),e._uU(22,"="),e.qZA(),e.TgZ(23,"div",13)(24,"input",14,15),e.NdJ("ngModelChange",function(y){return u.data.amount=y})("ngModelChange",function(){return u.valueChanged("amount")}),e.qZA()(),e.TgZ(26,"select",16),e.NdJ("ngModelChange",function(y){return u.data.currencyCode=y})("ngModelChange",function(){return u.valueChanged("tir")}),e.YNc(27,r,2,2,"option",17),e.qZA()()()(),e.TgZ(28,"div",18),e.YNc(29,M,21,16,"div",19),e.qZA()(),e.YNc(30,b,6,0,"ion-card",20)),2&a&&(e.xp6(6),e.Oqu(e.lcZ(7,7,"\u041c\u043e\u0439 \u0431\u0430\u043b\u0430\u043d\u0441")),e.xp6(11),e.Q6J("ngModel",u.data.tir),e.xp6(7),e.Q6J("ngModel",u.data.amount),e.xp6(2),e.Q6J("ngModel",u.data.currencyCode),e.xp6(1),e.Q6J("ngForOf",u.exchanges),e.xp6(2),e.Q6J("ngIf",u.authService.currentUser),e.xp6(1),e.Q6J("ngIf",u.payConfirm))},dependencies:[_.mk,_.sg,_.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,o.YG,o.PM,o.Zi,o.Dq,o.W2,o.Gu,o.YI,h.rH,g.X$],styles:[".price-card[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid #ccc;border-radius:10px;padding:10px;width:100%;gap:20px;margin:5px 0}.radio[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px;width:30px;background-color:#ccc;border-radius:50%}.radio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:50%;background-color:#ff7100}.price-card.active[_ngcontent-%COMP%]{border:3px solid rgb(255,113,0)}.input-with-suffix[_ngcontent-%COMP%]{position:relative;display:inline-block}.input-with-suffix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}.input-with-suffix[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none;color:#fff}"]})}return c})()}];let O=(()=>{class c{static#e=this.\u0275fac=function(a){return new(a||c)};static#t=this.\u0275mod=e.oAB({type:c});static#n=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(x),h.Bz]})}return c})();var A=i(324);let S=(()=>{class c{static#e=this.\u0275fac=function(a){return new(a||c)};static#t=this.\u0275mod=e.oAB({type:c});static#n=this.\u0275inj=e.cJS({imports:[_.ez,n.u5,o.Pc,O,A.HeaderPageModule,g.aw]})}return c})()},324:(T,v,i)=>{i.r(v),i.d(v,{HeaderPageModule:()=>d});var _=i(6814),n=i(6223),o=i(1232),h=i(6800),p=i(2486),m=i(2029);const e=[{path:"",component:p.E}];let P=(()=>{class s{static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=m.oAB({type:s});static#n=this.\u0275inj=m.cJS({imports:[h.Bz.forChild(e),h.Bz]})}return s})(),d=(()=>{class s{static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=m.oAB({type:s});static#n=this.\u0275inj=m.cJS({imports:[_.ez,n.u5,o.Pc,P]})}return s})()},2486:(T,v,i)=>{i.d(v,{E:()=>d});var _=i(5861),n=i(5053),o=i(2029),h=i(6800),p=i(3248),m=i(2545);let e=(()=>{class s{constructor(r,l){this.router=r,this.authService=l}init(){try{p.V.requestPermissions().then(r=>{"granted"===r.receive?(console.log("We have permission to send push notifications"),p.V.register()):console.log("We do not have permission to send push notifications")}),p.V.addListener("registration",r=>{console.log("saveDeviceToken",r.value),this.authService.saveDeviceToken(r.value).subscribe()}),p.V.addListener("registrationError",r=>{console.error("Error with Push plugin",r)}),p.V.addListener("pushNotificationReceived",r=>{console.log("Push received: ",r)}),p.V.addListener("pushNotificationActionPerformed",r=>{console.log("Push action performed: ",r)})}catch(r){console.log(r)}}static#e=this.\u0275fac=function(l){return new(l||s)(o.LFG(h.F0),o.LFG(m.$))};static#t=this.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var P=i(1232);let d=(()=>{class s{constructor(r,l,C,M,b){this.router=r,this.pushService=l,this.menu=C,this.authService=M,this.modalCtrl=b}ngOnInit(){}menuOpened(){var r=this;return(0,_.Z)(function*(){yield r.menu.toggle()})()}goToNotify(){this.router.navigate(["/notify"])}openTestPage(){var r=this;return(0,_.Z)(function*(){const l=yield r.modalCtrl.create({component:n.b,showBackdrop:!0,breakpoints:[0,.6],initialBreakpoint:.6,presentingElement:yield r.modalCtrl.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield l.present(),yield l.onWillDismiss()})()}returnLogo(){return"ru"===this.authService.language?"/assets/logos/rus-oq.png":"tr"===this.authService.language?"/assets/logos/turk-oq.png.png":"en"===this.authService.language?"/assets/logos/english-oq.png":void 0}static#e=this.\u0275fac=function(l){return new(l||s)(o.Y36(h.F0),o.Y36(e),o.Y36(P._q),o.Y36(m.$),o.Y36(P.IN))};static#t=this.\u0275cmp=o.Xpm({type:s,selectors:[["app-header"]],decls:7,vars:0,consts:[[1,"header","ion-padding"],[1,"header__left",3,"click"],["src","assets/img/menu.svg","alt",""],["src","/assets/logos/tirgo-logo.png","alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",1,"header__logo"],[1,"header__right",3,"click"],["src","assets/img/notification.svg","alt",""]],template:function(l,C){1&l&&(o.TgZ(0,"ion-header")(1,"header",0)(2,"button",1),o.NdJ("click",function(){return C.menuOpened()}),o._UZ(3,"img",2),o.qZA(),o._UZ(4,"img",3),o.TgZ(5,"button",4),o.NdJ("click",function(){return C.goToNotify()}),o._UZ(6,"img",5),o.qZA()()())},dependencies:[P.Gu],styles:[".header[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:1fr auto 1fr;color:#fff;padding-top:calc(.9375rem + env(safe-area-inset-top))!important}.header__left[_ngcontent-%COMP%]{padding:.3125rem;justify-self:start}.header__logo[_ngcontent-%COMP%]{width:11.25rem}.header__title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;justify-self:center}.header__right[_ngcontent-%COMP%]{padding:.3125rem;justify-self:right}.header__right[_ngcontent-%COMP%]   i.icm-notif[_ngcontent-%COMP%]{font-size:1.375rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none!important}"]})}return s})()},5053:(T,v,i)=>{i.d(v,{b:()=>m});var _=i(5861),n=i(2029),o=i(2545),h=i(1232),p=i(6223);let m=(()=>{class e{constructor(d,s){this.authService=d,this.modalCtrl=s,this.star=5,this.comment=""}ngOnInit(){}setRaiting(){var d=this;return(0,_.Z)(function*(){(yield d.authService.setRaiting(d.orderid,d.star,d.comment,d.userid).toPromise()).status&&(yield d.authService.alert("\u041e\u0442\u043b\u0438\u0447\u043d\u043e","\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u043e\u0446\u0435\u043d\u0438\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430."),yield d.modalCtrl.dismiss())})()}static#e=this.\u0275fac=function(s){return new(s||e)(n.Y36(o.$),n.Y36(h.IN))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-setraiting"]],inputs:{orderid:"orderid",userid:"userid"},decls:13,vars:6,consts:[[1,"raiting-page"],[1,"stars"],[3,"name","click"],["type","text","placeholder","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",3,"ngModel","ngModelChange"],[3,"click"]],template:function(s,g){1&s&&(n.TgZ(0,"ion-content")(1,"div",0)(2,"h2"),n._uU(3,"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),n.qZA(),n.TgZ(4,"div",1)(5,"ion-icon",2),n.NdJ("click",function(){return g.star=1}),n.qZA(),n.TgZ(6,"ion-icon",2),n.NdJ("click",function(){return g.star=2}),n.qZA(),n.TgZ(7,"ion-icon",2),n.NdJ("click",function(){return g.star=3}),n.qZA(),n.TgZ(8,"ion-icon",2),n.NdJ("click",function(){return g.star=4}),n.qZA(),n.TgZ(9,"ion-icon",2),n.NdJ("click",function(){return g.star=5}),n.qZA()(),n.TgZ(10,"input",3),n.NdJ("ngModelChange",function(l){return g.comment=l}),n.qZA(),n.TgZ(11,"button",4),n.NdJ("click",function(){return g.setRaiting()}),n._uU(12,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443"),n.qZA()()()),2&s&&(n.xp6(5),n.Q6J("name",g.star>=1?"star":"star-outline"),n.xp6(1),n.Q6J("name",g.star>=2?"star":"star-outline"),n.xp6(1),n.Q6J("name",g.star>=3?"star":"star-outline"),n.xp6(1),n.Q6J("name",g.star>=4?"star":"star-outline"),n.xp6(1),n.Q6J("name",g.star>=5?"star":"star-outline"),n.xp6(1),n.Q6J("ngModel",g.comment))},dependencies:[p.Fj,p.JJ,p.On,h.W2,h.gu],styles:[".raiting-page[_ngcontent-%COMP%]{height:400px;display:flex;align-items:center;justify-content:flex-start;flex-direction:column}.raiting-page[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:20px;width:80%;outline:none;background:#252333;border:none;border-radius:4px;height:56px;padding:0 0 0 15px;font-family:Montserrat,sans-serif;font-style:normal;font-weight:500;font-size:14px;line-height:16px;color:#cfd2d8;box-sizing:border-box}.raiting-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:0;color:#fff}.raiting-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;text-align:center;color:#fff}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{margin-top:20px}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:5px;color:#ed901e;font-size:3em}.raiting-page[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:80%;margin-top:20px;border-radius:10px;background:#403c5f}"]})}return e})()}}]);
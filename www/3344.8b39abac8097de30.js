"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3344,324],{324:(M,A,s)=>{s.r(A),s.d(A,{HeaderPageModule:()=>e});var h=s(6814),a=s(6223),u=s(7331),v=s(6800),l=s(2486),Z=s(2029);const y=[{path:"",component:l.E}];let T=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=Z.oAB({type:d});static#n=this.\u0275inj=Z.cJS({imports:[v.Bz.forChild(y),v.Bz]})}return d})(),e=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=Z.oAB({type:d});static#n=this.\u0275inj=Z.cJS({imports:[h.ez,a.u5,u.Pc,T]})}return d})()},2486:(M,A,s)=>{s.d(A,{E:()=>e});var h=s(5861),a=s(5053),u=s(2029),v=s(6800),l=s(3248),Z=s(2545);let y=(()=>{class d{constructor(c,p){this.router=c,this.authService=p}init(){try{l.V.requestPermissions().then(c=>{"granted"===c.receive?(console.log("We have permission to send push notifications"),l.V.register()):console.log("We do not have permission to send push notifications")}),l.V.addListener("registration",c=>{console.log("saveDeviceToken",c.value),this.authService.saveDeviceToken(c.value).subscribe()}),l.V.addListener("registrationError",c=>{console.error("Error with Push plugin",c)}),l.V.addListener("pushNotificationReceived",c=>{console.log("Push received: ",c)}),l.V.addListener("pushNotificationActionPerformed",c=>{console.log("Push action performed: ",c)})}catch(c){console.log(c)}}static#e=this.\u0275fac=function(p){return new(p||d)(u.LFG(v.F0),u.LFG(Z.$))};static#t=this.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})();var T=s(7331);let e=(()=>{class d{constructor(c,p,O,C,b){this.router=c,this.pushService=p,this.menu=O,this.authService=C,this.modalCtrl=b}ngOnInit(){}menuOpened(){var c=this;return(0,h.Z)(function*(){yield c.menu.toggle()})()}goToNotify(){var c=this;return(0,h.Z)(function*(){c.pushService.init(),yield c.router.navigate(["/notify"])})()}openTestPage(){var c=this;return(0,h.Z)(function*(){const p=yield c.modalCtrl.create({component:a.b,showBackdrop:!0,breakpoints:[0,.6],initialBreakpoint:.6,presentingElement:yield c.modalCtrl.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield p.present(),yield p.onWillDismiss()})()}returnLogo(){return"ru"===this.authService.language?"/assets/logos/rus-oq.png":"tr"===this.authService.language?"/assets/logos/turk-oq.png.png":"en"===this.authService.language?"/assets/logos/english-oq.png":void 0}static#e=this.\u0275fac=function(p){return new(p||d)(u.Y36(v.F0),u.Y36(y),u.Y36(T._q),u.Y36(Z.$),u.Y36(T.IN))};static#t=this.\u0275cmp=u.Xpm({type:d,selectors:[["app-header"]],decls:7,vars:0,consts:[[1,"header","ion-padding"],[1,"header__left",3,"click"],["src","assets/img/menu.svg","alt",""],["src","/assets/logos/tirgo-logo.png","alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",1,"header__logo"],[1,"header__right",3,"click"],["src","assets/img/notification.svg","alt",""]],template:function(p,O){1&p&&(u.TgZ(0,"ion-header")(1,"header",0)(2,"button",1),u.NdJ("click",function(){return O.menuOpened()}),u._UZ(3,"img",2),u.qZA(),u._UZ(4,"img",3),u.TgZ(5,"button",4),u.NdJ("click",function(){return O.goToNotify()}),u._UZ(6,"img",5),u.qZA()()())},dependencies:[T.Gu],styles:[".header[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:1fr auto 1fr;color:#fff;padding-top:calc(.9375rem + env(safe-area-inset-top))!important}.header__left[_ngcontent-%COMP%]{padding:.3125rem;justify-self:start}.header__logo[_ngcontent-%COMP%]{width:11.25rem}.header__title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;justify-self:center}.header__right[_ngcontent-%COMP%]{padding:.3125rem;justify-self:right}.header__right[_ngcontent-%COMP%]   i.icm-notif[_ngcontent-%COMP%]{font-size:1.375rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none!important}"]})}return d})()},3344:(M,A,s)=>{s.r(A),s.d(A,{HomePageModule:()=>ue});var h=s(6814),a=s(6223),u=s(7331),v=s(6800),l=s(5861),Z=s(8008),y=s(7838),T=s(1802),e=s(2029),d=s(2545),m=s(3911);let c=(()=>{class r{constructor(t,n,i,o,g){this.authService=t,this.loadingCtrl=n,this.alertController=i,this.modalController=o,this.router=g,this.loadingAccept=!1,this.price="",this.selecteddays=[]}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.authService.checkGeolocation()})()}acceptOrderFinalAccept(){var t=this;return(0,l.Z)(function*(){t.loadingAccept=!0;let n="",i="";t.loading=yield t.loadingCtrl.create({message:"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e"}),t.loading.present(),y.b.getCurrentPosition({maximumAge:1e3,timeout:5e3,enableHighAccuracy:!0}).then(o=>{t.loadingAccept=!0;const g="https://geocode-maps.yandex.ru/1.x/?format=json&geocode="+o.coords.longitude.toString()+","+o.coords.latitude.toString()+"&apikey="+t.authService.currentUser?.config.key_api_maps+"&lang=ru-RU";Z.Z.get(g).then(function(){var x=(0,l.Z)(function*(f){f.status&&(t.loading.dismiss(),i=f.data.response.GeoObjectCollection.featureMember[0].GeoObject.description.split(",")[f.data.response.GeoObjectCollection.featureMember[0].GeoObject.description.split(",").length-1].replace(" ",""),n=t.item.route.from_city.split(",")[1].replace(" ",""),i===n?(t.item.isMerchant&&(t.item.id=+t.item.id.split("M")[1]),(yield t.authService.acceptOrder(t.item.id,t.price,t.selecteddays,t.item.isMerchant).toPromise()).status&&(t.authService.myorders=yield t.authService.getMyOrders().toPromise(),yield t.modalController.dismiss({accepted:!0}))):(yield t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437. \u0412\u044b \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u0433\u043e\u0440\u043e\u0434\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0433\u0440\u0443\u0437\u0430."),yield t.modalController.dismiss({accepted:!1})))});return function(f){return x.apply(this,arguments)}}())},o=>{"User denied Geolocation"==o.message?(t.loading.dismiss(),t.loadingAccept=!1,t.authService.alertLocation("\u0423\u043f\u0441","\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Tirgo Driver")):(t.loading.dismiss(),t.loadingAccept=!1,t.authService.alertLocation("\u0423\u043f\u0441","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Tirgo Driver"))})})()}acceptOrderFinal(){var t=this;return(0,l.Z)(function*(){var i;!t.item.secure_transaction||t.authService.currentUser?.driver_verification||t.authService.currentUser?.send_verification?(t.loadingAccept=!0,t.price?yield(yield t.alertController.create({header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435?",cssClass:"customAlert",buttons:[{text:"\u041d\u0435\u0442",role:"cancel",cssClass:"secondary",handler:()=>{t.loadingAccept=!1,console.log("Confirm Cancel")}},{text:"\u0414\u0430",handler:()=>{t.acceptOrderFinalAccept()}}]})).present():(yield t.authService.alert("\u0423\u043f\u0441","\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u0412\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0446\u0435\u043d\u0435."),t.loadingAccept=!1)):yield(yield t.alertController.create({header:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0447\u0442\u043e\u0431\u044b \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c  \u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0442\u044c \u201c\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u0435\u044b\u0435 \u0441\u0434\u0435\u043b\u043a\u0438",cssClass:"custom-alert",buttons:[{text:"OK",cssClass:"icon-alert-button",handler:(i=(0,l.Z)(function*(){yield t.router.navigate(["/notify"]),yield t.modalController.dismiss({accepted:!0})}),function(){return i.apply(this,arguments)})}]})).present()})()}findDay(t){return this.selecteddays.findIndex(i=>i===t)>=0}selectDay(t){const n=this.selecteddays.findIndex(i=>i===t);n>=0?this.selecteddays.splice(n,1):this.selecteddays.push(t)}addTransport(){var t=this;return(0,l.Z)(function*(){const n=yield t.modalController.create({component:T.i,showBackdrop:!0,breakpoints:[0,1],initialBreakpoint:1,presentingElement:yield t.modalController.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield n.present(),yield n.onWillDismiss()})()}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(d.$),e.Y36(u.HT),e.Y36(u.Br),e.Y36(u.IN),e.Y36(v.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-order"]],inputs:{item:"item"},decls:17,vars:14,consts:[[1,"wrapper-fluid","ion-padding-tabs"],[1,"body-wrap","form-block"],[1,"autorize"],["type","text","inputmode","tel","name","name",3,"placeholder","ngModel","ngModelChange"],[1,"reg-btn","accept-btn","margin-top-15",3,"disabled","click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"ion-content")(6,"div",0)(7,"div",1)(8,"div",2)(9,"p")(10,"b"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"input",3),e.NdJ("ngModelChange",function(g){return i.price=g}),e.qZA()(),e.TgZ(14,"button",4),e.NdJ("click",function(){return i.acceptOrderFinal()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()),2&n&&(e.xp6(3),e.AsE("",e.lcZ(4,8,"\u0417\u0430\u043a\u0430\u0437")," \u2116",i.authService.addLeadingZeros(i.item.id),""),e.xp6(8),e.AsE("",e.lcZ(12,10,"\u0412\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0446\u0435\u043d\u0435")," ",i.item.secure_transaction?"(\u0441\u0443\u043c)":"($)",""),e.xp6(2),e.MGl("placeholder","\u0412\u0430\u0448\u0430 \u0446\u0435\u043d\u0430 \u0432 ",i.item.secure_transaction?"\u0441\u0443\u043c":"$",""),e.Q6J("ngModel",i.price),e.xp6(1),e.Q6J("disabled",i.loadingAccept),e.xp6(1),e.hij("",e.lcZ(16,12,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435")," "))},dependencies:[a.Fj,a.JJ,a.On,u.W2,u.Gu,u.wd,u.sr,m.X$],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff}.dates-loades[_ngcontent-%COMP%]{display:flex}.dates-loades[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;border-radius:5px;border:1px solid #252333;background:#252333;height:50px;width:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;color:#fff}.dates-loades[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}.dates-loades[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{margin-left:10px}.dates-loades[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:1px solid white}.accept-btn[_ngcontent-%COMP%]{background:var(--ion-color-warning);color:var(--ion-color-primary)}"]})}return r})();var p=s(4409),O=s(2486);const C=function(r){return{bangbang:r}};function b(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const o=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.allTruck(o.type))}),e.TgZ(1,"div"),e._uU(2),e.qZA()()}if(2&r){const t=_.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(2,C,t.type===n.selectedtruck)),e.xp6(2),e.Oqu(n.returnNameTypeTransport(t.type))}}function S(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.allTruck(0))}),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,b,3,4,"div",10),e._UZ(6,"div",11),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,C,0===t.selectedtruck)),e.xp6(2),e.Oqu(e.lcZ(4,3,"\u0412\u0441\u0435")),e.xp6(2),e.Q6J("ngForOf",t.authService.mytruck)}}function F(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addTransport())}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"\u0411\u0435\u0437 \u0430\u0432\u0442\u043e \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432. \u0423 \u0432\u0430\u0441 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442.")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442")))}function U(r,_){if(1&r&&(e.TgZ(0,"div",13),e._UZ(1,"ion-icon",14),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"translate"),e.YNc(5,F,6,6,"span",15),e.qZA()()),2&r){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0434\u043b\u044f \u0432\u0430\u0441.")," "),e.xp6(2),e.Q6J("ngIf",t.authService.mytruck&&0===t.authService.mytruck.length)}}function E(r,_){1&r&&e._UZ(0,"img",30)}function J(r,_){1&r&&e._UZ(0,"img",31)}function H(r,_){if(1&r&&(e.TgZ(0,"span"),e._UZ(1,"img",32),e.qZA()),2&r){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("src",n.file_url+t.merchant.logoFilePath,e.LSH)}}function D(r,_){1&r&&e._UZ(0,"img",33)}function q(r,_){1&r&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c")))}function I(r,_){1&r&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"\u0421\u043a\u0440\u044b\u0442\u044c")))}function N(r,_){1&r&&e._UZ(0,"img",35)}function L(r,_){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"\u041a\u043b\u0438\u0435\u043d\u0442:"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&r){const t=e.oxw(3).$implicit;e.xp6(4),e.Oqu(t.merchant.companyName)}}function B(r,_){1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"ADR (\u041f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0430 \u043e\u043f\u0430\u0441\u043d\u044b\u0445 \u0433\u0440\u0443\u0437\u043e\u0432)")),e.xp6(3),e.hij("",e.lcZ(6,4,"\u0414\u0430")," "))}function Y(r,_){1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u0430\u044f \u043e\u043f\u043b\u0430\u0442\u0430")),e.xp6(3),e.hij("",e.lcZ(6,4,"\u0414\u0430")," "))}function Q(r,_){1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430")),e.xp6(3),e.hij("",e.lcZ(6,4,"\u0414\u0430")," "))}function j(r,_){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=_.$implicit,n=e.oxw(6);e.xp6(1),e.hij(" ",n.returnNameTypeTransport(t)," ")}}function G(r,_){if(1&r&&(e.TgZ(0,"span"),e.YNc(1,j,2,1,"span",19),e.qZA()),2&r){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngForOf",t.transport_types)}}function $(r,_){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw(3).$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.returnNameTypeTransport(t.transport_type)," ")}}function K(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,o=e.oxw(2);return e.KtG(o.appendOrder(i))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"\u041f\u0440\u0438\u043d\u044f\u0442\u044c")))}function R(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,o=e.oxw(2);return e.KtG(o.cancelOrder(i))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"\u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438")))}function z(r,_){if(1&r&&(e.ynx(0),e.TgZ(1,"table",36)(2,"tbody"),e.YNc(3,L,5,1,"tr",15),e.TgZ(4,"tr")(5,"td"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.YNc(11,B,7,6,"tr",15),e.YNc(12,Y,7,6,"tr",15),e.YNc(13,Q,7,6,"tr",15),e.TgZ(14,"tr")(15,"td"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"td"),e.YNc(19,G,2,1,"span",15),e.YNc(20,$,2,1,"span",15),e.qZA()(),e.TgZ(21,"tr")(22,"td"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()(),e.TgZ(27,"tr")(28,"td"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.ALo(33,"translate"),e.qZA()()()(),e.YNc(34,K,3,3,"button",37),e.YNc(35,R,3,3,"button",38),e.BQk()),2&r){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.isMerchant),e.xp6(3),e.Oqu(e.lcZ(7,16,"\u0412\u0440\u0435\u043c\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438")),e.xp6(3),e.Oqu(e.xi3(10,18,t.date_send,"dd MMMM yyyy HH:mm")),e.xp6(2),e.Q6J("ngIf",t.adr),e.xp6(1),e.Q6J("ngIf",t.no_cash),e.xp6(1),e.Q6J("ngIf",t.secure_transaction),e.xp6(3),e.Oqu(e.lcZ(17,21,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430")),e.xp6(3),e.Q6J("ngIf",t.transport_types),e.xp6(1),e.Q6J("ngIf",t.transport_type&&!t.transport_types),e.xp6(3),e.Oqu(e.lcZ(24,23,"\u0422\u0438\u043f \u0433\u0440\u0443\u0437\u0430")),e.xp6(3),e.Oqu(n.returnNameCargoType(t.type_cargo)),e.xp6(3),e.Oqu(e.lcZ(30,25,"\u0412\u0435\u0441 \u0433\u0440\u0443\u0437\u0430")),e.xp6(3),e.AsE("",t.weight," ",e.lcZ(33,27,"\u043a\u0433"),"."),e.xp6(2),e.Q6J("ngIf",n.findAcceptedOrders(t.id)),e.xp6(1),e.Q6J("ngIf",!n.findAcceptedOrders(t.id))}}function W(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.viewOrderInfo(i.id))}),e.TgZ(2,"span",23)(3,"span"),e.YNc(4,E,1,0,"img",24),e.YNc(5,J,1,0,"img",25),e._uU(6),e.qZA(),e.YNc(7,H,2,1,"span",15),e.TgZ(8,"span"),e.YNc(9,D,1,0,"img",26),e.YNc(10,q,3,3,"span",27),e.YNc(11,I,3,3,"span",27),e.qZA()(),e.YNc(12,N,1,0,"img",28),e.qZA(),e.TgZ(13,"table",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.viewOrderInfo(i.id))}),e.TgZ(14,"tbody")(15,"tr")(16,"td"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA()(),e.TgZ(21,"tr")(22,"td"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()()()(),e.YNc(27,z,36,29,"ng-container",15),e.qZA()}if(2&r){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!n.findAcceptedOrders(t.id)),e.xp6(1),e.Q6J("ngIf",n.findAcceptedOrders(t.id)),e.xp6(1),e.hij(" \u2116",n.authService.addLeadingZeros(t.id)," "),e.xp6(1),e.Q6J("ngIf",t.merchant&&t.merchant.logoFilePath),e.xp6(2),e.Q6J("ngIf",t.secure_transaction),e.xp6(1),e.Q6J("ngIf",n.vieworder!==t.id),e.xp6(1),e.Q6J("ngIf",n.vieworder===t.id),e.xp6(1),e.Q6J("ngIf",t.insure_deal),e.xp6(5),e.hij("",e.lcZ(18,13,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0438\u0437"),":"),e.xp6(3),e.Oqu(t.route.from_city),e.xp6(3),e.hij("",e.lcZ(24,15,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0432"),":"),e.xp6(3),e.Oqu(t.route.to_city),e.xp6(1),e.Q6J("ngIf",n.vieworder===t.id)}}function V(r,_){if(1&r&&(e.ynx(0),e.YNc(1,W,28,17,"div",20),e.BQk()),2&r){const t=_.$implicit;e.xp6(1),e.Q6J("ngIf",2!=t.status&&1!=t.status&&3!=t.status)}}function X(r,_){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e.YNc(2,V,2,1,"ng-container",19),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.items)}}function ee(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",52)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",53)(5,"div",54)(6,"div",55)(7,"span"),e._uU(8),e.qZA(),e.TgZ(9,"label")(10,"input",56),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectDay(i,o.appendorderdate,0))}),e.qZA(),e._UZ(11,"span",57),e.qZA()()(),e.TgZ(12,"div",54)(13,"div",55)(14,"span"),e._uU(15),e.qZA(),e.TgZ(16,"label")(17,"input",56),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectDay(i,o.appendorderdate,1))}),e.qZA(),e._UZ(18,"span",57),e.qZA()()(),e.TgZ(19,"div",54)(20,"div",55)(21,"span"),e._uU(22),e.qZA(),e.TgZ(23,"label")(24,"input",56),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectDay(i,o.appendorderdate,2))}),e.qZA(),e._UZ(25,"span",57),e.qZA()()()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,4,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u0434\u0430\u0442\u044b \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),":"),e.xp6(6),e.Oqu(t.returnDay(t.appendorderdate,0)),e.xp6(7),e.Oqu(t.returnDay(t.appendorderdate,1)),e.xp6(7),e.Oqu(t.returnDay(t.appendorderdate,2))}}function te(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",42)(2,"form",43)(3,"div",44)(4,"label",45),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",46)(8,"input",47),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.price=i)}),e.qZA(),e.TgZ(9,"span"),e._uU(10,"$ (USD)"),e.qZA()()(),e.TgZ(11,"div",48)(12,"p"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",49)(16,"span"),e._uU(17),e.qZA()()(),e.YNc(18,ee,26,6,"div",50),e.TgZ(19,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sendAcceptOrder())}),e.TgZ(20,"b"),e._uU(21),e.ALo(22,"translate"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(5),e.hij("",e.lcZ(6,7,"\u0412\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0446\u0435\u043d\u0435"),":"),e.xp6(3),e.Q6J("ngModel",t.price),e.xp6(5),e.hij("",e.lcZ(14,9,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438 \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),":"),e.xp6(4),e.Oqu(t.appendorderdate),e.xp6(1),e.Q6J("ngIf",t.add_two_days),e.xp6(1),e.Q6J("disabled",t.loadingSendButton),e.xp6(2),e.Oqu(e.lcZ(22,11,"\u041e\u0422\u041f\u0420\u0410\u0412\u0418\u0422\u042c \u041f\u0420\u0415\u0414\u041b\u041e\u0416\u0415\u041d\u0418\u0415"))}}function ne(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"h2"),e._uU(2,"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043c"),e.qZA(),e.TgZ(3,"form",59)(4,"label",60),e._uU(5,"\u0413\u043e\u0440\u043e\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u0437\u0430"),e.qZA(),e.TgZ(6,"input",61),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.filteredCityOut=i)}),e.qZA(),e.TgZ(7,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.filterOrders())}),e._uU(8,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438"),e.qZA(),e.TgZ(9,"button",62),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.filterClose())}),e._uU(10,"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.filteredCityOut)}}function ie(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64)(2,"h2",65),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"br"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",66)(9,"button",67),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalOrderFull())}),e.TgZ(10,"b"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"button"),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()}2&r&&(e.xp6(3),e.hij("",e.lcZ(4,4,"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u044c")," "),e.xp6(3),e.hij(" ",e.lcZ(7,6,"\u0434\u0430\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437?"),""),e.xp6(5),e.Oqu(e.lcZ(12,8,"\u0414\u0430")),e.xp6(3),e.Oqu(e.lcZ(15,10,"\u041d\u0435\u0442")))}const re=[{path:"",component:(()=>{class r{constructor(t,n,i,o,g,x){this.authService=t,this.alertController=n,this.modalController=i,this.socketService=o,this.loadingCtrl=g,this.routerOutlet=x,this.file_url="https://merchant.tirgo.io/api/v1/file/download/",this.modalAppendOrder=!1,this.modalAppendOrderFull=!1,this.filter=!1,this.vieworder=0,this.appendorderid=0,this.appendorderdate="",this.add_two_days=!1,this.dates=[],this.price="",this.selectedtruck=0,this.items=[],this.localItems=[],this.worldItems=[],this.selectedType="world",this.loadingSendButton=!1,this.filteredCityOut="",this.haveSameContents=(f,P)=>{if(!f||!P)return!1;f=f.slice(1,-1).split(",");for(const k of new Set([...f,...P]))if(f.filter(w=>+w===k).length!==P.filter(w=>w===k).length)return!1;return!0}}doRefresh(t){var n=this;return(0,l.Z)(function*(){n.allTruck(n.selectedtruck),setTimeout(()=>{t.target.complete(),n.filterOrderLocal()},1e3)})()}selectType(t){this.selectedType=t,this.filterOrderLocal()}filterOrderLocal(){for(let t of this.items)t.route.from_city===t.route.to_city?this.localItems.push({id:t.id}):this.worldItems.push({id:t.id})}localOrWorldIsset(t){return"local"===this.selectedType?this.localItems.findIndex(i=>i.id===t)>=0:"world"===this.selectedType&&this.worldItems.findIndex(i=>i.id===t)>=0}returnNameTypeTransport(t){const n=this.authService.typetruck.findIndex(i=>+i.id==+t);return n>=0?this.authService.typetruck[n].name:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}returnNameCargoType(t){const n=this.authService.typecargo.findIndex(i=>+i.id==+t);return n>=0?this.authService.typecargo[n].name:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}ionViewWillEnter(){var t=this;return(0,l.Z)(function*(){t.getOrders(),t.filterOrderLocal()})()}getOrders(){0==this.selectedtruck?this.allTruck(0):this.authService.getTruck().subscribe(t=>{this.myTruckTypeIds=t.map(n=>n.type),this.authService.getMyOrders().subscribe(n=>{this.items=n.filter(i=>this.haveSameContents(i.transport_types,[this.selectedtruck])),this.items=this.items.sort(function(i,o){return Number(new Date(i.date_create))-Number(new Date(o.date_create))}),this.items.forEach((i,o)=>{})})})}ngOnInit(){var t=this;this.getOrders(),this.routerOutlet.swipeGesture=!1,this.socketService.updateAllOrders().subscribe(function(){var n=(0,l.Z)(function*(i){for(let o of t.authService.myorders){const g=t.authService.myorders.findIndex(x=>x.id===o.id&&2!==o.status);g>=0&&t.authService.myorders[g].orders_accepted.findIndex(f=>f.id===t.authService.currentUser?.id&&f.status_order)>=0&&(t.authService.activeorder=t.authService.myorders[g],t.authService.myorders.splice(g,1))}t.getOrders()});return function(i){return n.apply(this,arguments)}}()),this.filterOrderLocal()}viewOrderInfo(t){this.vieworder=this.vieworder===t?0:t}acceptOrder(t){var n=this;return(0,l.Z)(function*(){const i=yield n.modalController.create({component:c,canDismiss:!0,showBackdrop:!0,breakpoints:[0,.9],initialBreakpoint:.9,presentingElement:yield n.modalController.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios",componentProps:{item:t}});yield i.present();const{data:o}=yield i.onWillDismiss();o&&o.accepted&&(n.authService.myorders=yield n.authService.getMyOrders().toPromise(),n.getOrders())})()}findAcceptedOrders(t){const n=this.items.findIndex(i=>i.id===t);return!(n>=0)||this.items[n].orders_accepted.findIndex(o=>o.id===this.authService.currentUser?.id)<0}findAcceptedOrdersAndAccepted(t){const n=this.items.findIndex(i=>i.id===t);return n>=0&&this.items[n].orders_accepted.findIndex(o=>o.id===this.authService.currentUser?.id&&o.status_order)<0}appendOrder(t){var n=this;return(0,l.Z)(function*(){n.authService.activeorder?(yield n.authService.alert("\u041f\u0440\u0438\u043d\u044f\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439."),n.loading=!1):3===n.authService.currentUser?.dirty?(yield n.authService.alert("\u041f\u0440\u0438\u043d\u044f\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u0442\u0430\u043a \u043a\u0430\u043a \u0432\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0434\u043b\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438."),n.loading=!1):(n.loading=!1,yield n.acceptOrder(t))})()}openFilter(t){this.filter=t}openModalOrderFull(){this.closeModalAll(),this.modalAppendOrderFull=!0}closeModalAll(){this.modalAppendOrder=!1,this.modalAppendOrderFull=!1,this.filter=!1}returnDay(t,n){let i=(+t.split(".")[0]+ +n).toString();return+i<10&&(i="0"+i),i.toString()}selectDay(t,n,i){let o=(+n.split(".")[0]+ +i).toString();+o<10&&(o="0"+o);const g=this.dates.findIndex(x=>x===o);t.target.checked?g<0&&this.dates.push(o):this.dates.splice(g,1)}sendAcceptOrder(){var t=this;return(0,l.Z)(function*(){t.loadingSendButton=!0,t.loading=yield t.loadingCtrl.create({message:"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e"}),t.loading.present(),y.b.getCurrentPosition().then(function(){var n=(0,l.Z)(function*(i){const o="https://geocode-maps.yandex.ru/1.x/?format=json&geocode="+i.coords.latitude.toString()+","+i.coords.longitude.toString()+"&apikey="+t.authService.currentUser?.config.key_api_maps+"&lang=ru-RU";Z.Z.get(o).then(function(){var g=(0,l.Z)(function*(x){t.closeModalAll(),x.status&&(t.loading.dismiss(),t.authService.acceptOrder(t.appendorderid,t.price,t.dates,!1).toPromise().then(f=>{f.data&&(t.loading.dismiss(),t.loadingSendButton=!1,t.closeModalAll())}).catch(f=>{t.loading.dismiss(),t.loadingSendButton=!1,t.closeModalAll()}))});return function(x){return g.apply(this,arguments)}}()).catch(function(){var g=(0,l.Z)(function*(x){t.loading.dismiss(),t.loadingSendButton=!1,yield t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0414\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Tirgo Driver")});return function(x){return g.apply(this,arguments)}}())});return function(i){return n.apply(this,arguments)}}()).catch(function(){var n=(0,l.Z)(function*(i){t.loading.dismiss(),t.loadingSendButton=!1,yield t.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0414\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Tirgo Driver")});return function(i){return n.apply(this,arguments)}}())})()}cancelOrder(t){var n=this;return(0,l.Z)(function*(){var o;yield(yield n.alertController.create({header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?",cssClass:"customAlert",buttons:[{text:"\u041d\u0435\u0442",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"\u0414\u0430",handler:(o=(0,l.Z)(function*(){t.isMerchant&&(t.id=t.id.split("M")[1]),(yield n.authService.cancelOrder(t).toPromise()).status&&(n.authService.checkSession(),n.authService.activeorder=null,n.getOrders())}),function(){return o.apply(this,arguments)})}]})).present()})()}addTransport(){var t=this;return(0,l.Z)(function*(){const n=yield t.modalController.create({component:T.i,showBackdrop:!0,breakpoints:[0,1],initialBreakpoint:1,presentingElement:yield t.modalController.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield n.present(),yield n.onWillDismiss()})()}allTruck(t){this.selectedtruck=t,this.selectedtruck>0?(this.getOrders(),this.items=this.items.filter(n=>+n.transport_type==+this.selectedtruck)):this.authService.getMyOrders().subscribe(n=>{this.items=n,this.items.forEach((i,o)=>{})})}filterOrders(){this.getOrders(),this.items=this.items.filter(t=>t.route.from_city.toLowerCase().includes(this.filteredCityOut.toLowerCase())),this.filter=!1}filterClose(){this.getOrders(),this.filter=!1}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(d.$),e.Y36(u.Br),e.Y36(u.IN),e.Y36(p.$),e.Y36(u.HT),e.Y36(u.jP))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-home"]],decls:13,vars:6,consts:[["class","scroll-horizontal",4,"ngIf"],["class","noItem",4,"ngIf"],["slot","fixed","pullFactor","1","pullMin","100","pullMax","200",3,"ionRefresh"],["pullingIcon","arrow-dropdown","refreshingSpinner","circles",1,"loadingspinner"],["class","wrapper-fluid",4,"ngIf"],[1,"modal-append-order-full",3,"isOpen","willDismiss"],[1,"modal-filter",3,"isOpen","willDismiss"],[1,"modal-append-order",3,"isOpen","willDismiss"],[1,"scroll-horizontal"],[1,"scroll-item","widthAuto","myProfession","firstItemProf",3,"ngClass","click"],["class","scroll-item widthAuto myProfession",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab"],[1,"scroll-item","widthAuto","myProfession",3,"ngClass","click"],[1,"noItem"],["src","assets/img/wrong.svg"],[4,"ngIf"],[1,"classic-btn","filter-submit",3,"click"],[1,"wrapper-fluid"],[1,"body-wrap","form-block","main-body","body-have-bottom-menu"],[4,"ngFor","ngForOf"],["class","order-item",4,"ngIf"],[1,"order-item"],[1,"order-item-articul",3,"click"],[1,"order-header"],["src","assets/img/art.svg","alt","",4,"ngIf"],["src","assets/img/rel.svg","alt","",4,"ngIf"],["src","assets/img/done.svg",4,"ngIf"],["class","view-order",4,"ngIf"],["class","order-item-status","src","assets/img/done.svg","alt","",4,"ngIf"],[1,"table-info",3,"click"],["src","assets/img/art.svg","alt",""],["src","assets/img/rel.svg","alt",""],["alt","",3,"src"],["src","assets/img/done.svg"],[1,"view-order"],["src","assets/img/done.svg","alt","",1,"order-item-status"],[1,"table-data"],["class","get-order-btn",3,"click",4,"ngIf"],["class","order-btn",3,"click",4,"ngIf"],[1,"get-order-btn",3,"click"],[1,"order-btn",3,"click"],[1,"cta-modal"],[1,"cta-modal-wrap"],["action",""],[1,"price-wrap"],["for","price"],[1,"price-wrap-row"],["type","text","name","price","id","price",3,"ngModel","ngModelChange"],[1,"date-wrap"],[1,"date-wrap-row"],["class","custom-date",4,"ngIf"],[1,"get-order-btn","filter-sort-btn",3,"disabled","click"],[1,"custom-date"],[1,"custom-date-chekboxs"],[1,"data-checkbox","custom-check"],[1,"data-checkbox-block"],["type","checkbox",1,"checkbox",3,"change"],[1,"fake-checkbox"],[1,"filter","form-block"],["action","",1,"filter-form"],["for","country"],["id","country","type","text","name","country",3,"ngModel","ngModelChange"],[1,"reg-btn","filter-submit",3,"click"],[1,"code-error","personal-modal","filter-modal"],[1,"code-error-wrap"],[1,"ion-no-margin","ion-no-padding"],[1,"filter-modal-action"],[3,"click"]],template:function(n,i){1&n&&(e._UZ(0,"app-header"),e.YNc(1,S,7,7,"div",0),e.TgZ(2,"ion-content"),e.YNc(3,U,6,4,"div",1),e.TgZ(4,"ion-refresher",2),e.NdJ("ionRefresh",function(g){return i.doRefresh(g)}),e._UZ(5,"ion-refresher-content",3),e.qZA(),e.YNc(6,X,3,1,"div",4),e.TgZ(7,"ion-modal",5),e.NdJ("willDismiss",function(){return i.closeModalAll()}),e.YNc(8,te,23,13,"ng-template"),e.qZA(),e.TgZ(9,"ion-modal",6),e.NdJ("willDismiss",function(){return i.closeModalAll()}),e.YNc(10,ne,11,1,"ng-template"),e.qZA(),e.TgZ(11,"ion-modal",7),e.NdJ("willDismiss",function(){return i.closeModalAll()}),e.YNc(12,ie,16,12,"ng-template"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngIf",i.authService.mytruck&&i.authService.mytruck.length>0),e.xp6(2),e.Q6J("ngIf",i.items&&0===i.items.length||0===i.authService.mytruck.length),e.xp6(3),e.Q6J("ngIf",0!=i.authService.mytruck.length),e.xp6(1),e.Q6J("isOpen",i.modalAppendOrderFull),e.xp6(2),e.Q6J("isOpen",i.filter),e.xp6(2),e.Q6J("isOpen",i.modalAppendOrder))},dependencies:[h.mk,h.sg,h.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F,u.W2,u.gu,u.nJ,u.Wo,u.ki,O.E,h.uU,m.X$],styles:[".wrapper-fluid[_ngcontent-%COMP%]{height:100vh;margin-bottom:20px}.body-wrap[_ngcontent-%COMP%]{height:100vh}.order-item[_ngcontent-%COMP%]:last-child{margin-bottom:20px!important}.order-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}.order-header[_ngcontent-%COMP%]   .view-order[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.bangbang[_ngcontent-%COMP%]{background:#262434!important;color:var(--ion-color-warning)!important;border:1px solid var(--ion-color-warning)}.scroll-horizontal[_ngcontent-%COMP%]{padding:0 0 10px 16px}.scroll-horizontal[_ngcontent-%COMP%]   .scroll-item[_ngcontent-%COMP%]{color:gray}.tab[_ngcontent-%COMP%]{margin-top:10px;width:96%}.tab__header[_ngcontent-%COMP%]{display:flex;gap:.3125rem;border-radius:.5rem;background:#252333;padding:.3125rem;position:sticky;top:0;left:0}.tab__header[_ngcontent-%COMP%]   .tab__btn[_ngcontent-%COMP%]:last-child{max-width:50px;background:#403c5f;color:#f5f5f5;font-size:30px}.tab__btn[_ngcontent-%COMP%]{flex:1;color:#47484f;border-radius:.3125rem;font-size:1rem;padding:0;background-color:inherit}.tab__btn.btn[_ngcontent-%COMP%]{color:#fff;font-weight:600;height:40px;display:flex;align-items:center;justify-content:center;background:#403c61;border-radius:.625rem}"]})}return r})()}];let oe=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[v.Bz.forChild(re),v.Bz]})}return r})();var ae=s(324),se=s(2319);let ue=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[h.ez,a.u5,u.Pc,oe,ae.HeaderPageModule,se.h,m.aw]})}return r})()},5053:(M,A,s)=>{s.d(A,{b:()=>Z});var h=s(5861),a=s(2029),u=s(2545),v=s(7331),l=s(6223);let Z=(()=>{class y{constructor(e,d){this.authService=e,this.modalCtrl=d,this.star=5,this.comment=""}ngOnInit(){}setRaiting(){var e=this;return(0,h.Z)(function*(){(yield e.authService.setRaiting(e.orderid,e.star,e.comment,e.userid).toPromise()).status&&(yield e.authService.alert("\u041e\u0442\u043b\u0438\u0447\u043d\u043e","\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u043e\u0446\u0435\u043d\u0438\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430."),yield e.modalCtrl.dismiss())})()}static#e=this.\u0275fac=function(d){return new(d||y)(a.Y36(u.$),a.Y36(v.IN))};static#t=this.\u0275cmp=a.Xpm({type:y,selectors:[["app-setraiting"]],inputs:{orderid:"orderid",userid:"userid"},decls:13,vars:6,consts:[[1,"raiting-page"],[1,"stars"],[3,"name","click"],["type","text","placeholder","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",3,"ngModel","ngModelChange"],[3,"click"]],template:function(d,m){1&d&&(a.TgZ(0,"ion-content")(1,"div",0)(2,"h2"),a._uU(3,"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),a.qZA(),a.TgZ(4,"div",1)(5,"ion-icon",2),a.NdJ("click",function(){return m.star=1}),a.qZA(),a.TgZ(6,"ion-icon",2),a.NdJ("click",function(){return m.star=2}),a.qZA(),a.TgZ(7,"ion-icon",2),a.NdJ("click",function(){return m.star=3}),a.qZA(),a.TgZ(8,"ion-icon",2),a.NdJ("click",function(){return m.star=4}),a.qZA(),a.TgZ(9,"ion-icon",2),a.NdJ("click",function(){return m.star=5}),a.qZA()(),a.TgZ(10,"input",3),a.NdJ("ngModelChange",function(p){return m.comment=p}),a.qZA(),a.TgZ(11,"button",4),a.NdJ("click",function(){return m.setRaiting()}),a._uU(12,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443"),a.qZA()()()),2&d&&(a.xp6(5),a.Q6J("name",m.star>=1?"star":"star-outline"),a.xp6(1),a.Q6J("name",m.star>=2?"star":"star-outline"),a.xp6(1),a.Q6J("name",m.star>=3?"star":"star-outline"),a.xp6(1),a.Q6J("name",m.star>=4?"star":"star-outline"),a.xp6(1),a.Q6J("name",m.star>=5?"star":"star-outline"),a.xp6(1),a.Q6J("ngModel",m.comment))},dependencies:[l.Fj,l.JJ,l.On,v.W2,v.gu],styles:[".raiting-page[_ngcontent-%COMP%]{height:400px;display:flex;align-items:center;justify-content:flex-start;flex-direction:column}.raiting-page[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:20px;width:80%;outline:none;background:#252333;border:none;border-radius:4px;height:56px;padding:0 0 0 15px;font-family:Montserrat,sans-serif;font-style:normal;font-weight:500;font-size:14px;line-height:16px;color:#cfd2d8;box-sizing:border-box}.raiting-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:0;color:#fff}.raiting-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;text-align:center;color:#fff}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{margin-top:20px}.raiting-page[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:5px;color:#ed901e;font-size:3em}.raiting-page[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:80%;margin-top:20px;border-radius:10px;background:#403c5f}"]})}return y})()}}]);